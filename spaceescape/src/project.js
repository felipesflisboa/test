require=function s(a,c,o){function l(t,e){if(!c[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=c[t]={exports:{}};a[t][0].call(r.exports,function(e){return l(a[t][1][e]||e)},r,r.exports,s,a,c,o)}return c[t].exports}for(var u="function"==typeof require&&require,e=0;e<o.length;e++)l(o[e]);return l}({Actor:[function(e,t,i){"use strict";cc._RF.push(t,"ca517EUaI1C4IkF1jwjmPAM","Actor"),function(){cc.Class({extends:cc.Component,properties:{explosionPrefab:cc.Prefab,RigidBody:{visible:!1,get:function(){return null==this._rigidBody&&(this._rigidBody=this.node.getComponent(cc.RigidBody)),this._rigidBody}}},explode:function(){var e;return this.explosionPrefab&&(e=cc.instantiate(this.explosionPrefab),this.node.parent.addChild(e),e.setPosition(this.node.position)),this.finish()},finish:function(){return this.node.destroy()}})}.call(this),cc._RF.pop()},{}],BGMCreator:[function(e,t,i){"use strict";cc._RF.push(t,"c1de53XnylJT5OUiSdr08TQ","BGMCreator"),function(){var i,n;n=e("BGMPlayer"),i=cc.Class({extends:cc.Component,editor:{requireComponent:cc.AudioSource},statics:{lastPlayer:null},properties:{ClipEqualsFromLast:{visible:!1,get:function(){return this.audioSource.clip===i.lastPlayer.audioSource.clip}}},onLoad:function(){return this.audioSource=this.node.getComponent(cc.AudioSource),this.validateCurrentInstance()},validateCurrentInstance:function(){if(!cc.isValid(i.lastPlayer)||!this.ClipEqualsFromLast)return cc.isValid(i.lastPlayer)&&!this.ClipEqualsFromLast&&cc.audioEngine.stopAll(),this.createPlayer(this.audioSource).play();i.lastPlayer.play()},createPlayer:function(e){var t;return(t=(new cc.Node).addComponent(n)).initialize(e),i.lastPlayer=t}})}.call(this),cc._RF.pop()},{BGMPlayer:"BGMPlayer"}],BGMPlayerOld:[function(e,t,i){"use strict";cc._RF.push(t,"88ce2/eypZGXZaY2vNjeq5f","BGMPlayerOld"),function(){var e;e=cc.Class({extends:cc.Component,editor:{requireComponent:cc.AudioSource},statics:{lastClip:null},onLoad:function(){return cc.log("onLoad"),cc.log(this.name),this.audioSource=this.node.getComponent(cc.AudioSource),this.validateCurrentInstance()},validateCurrentInstance:function(){return e.lastClip!=e.lastClip&&cc.audioEngine.stopAll(),e.lastClip=this.audioSource.clip,this.play(this.audioSource)},play:function(e){var t,i;return(i=new cc.Node).name="AudioPlayer",i.addComponent(cc.AudioSource),(t=i.getComponent(cc.AudioSource)).clip=e.clip,cc.game.addPersistRootNode(i),cc.audioEngine.play(t.clip,!0,e.volume)},onDestroy:function(){return cc.log("Destroy!")}})}.call(this),cc._RF.pop()},{}],BGMPlayer:[function(e,t,i){"use strict";cc._RF.push(t,"7dcbd3aKpVC7bD35s1CG0QP","BGMPlayer"),function(){cc.Class({extends:cc.Component,initialize:function(e){return this.node.name="BGMPlayer",this.audioSource=this.node.addComponent(cc.AudioSource),this.audioSource.clip=e.clip,this.audioSource.volume=e.volume,cc.game.addPersistRootNode(this.node)},play:function(){return this.audioID=cc.audioEngine.play(this.audioSource.clip,!0,this.audioSource.volume),cc.audioEngine.setLoop(this.audioID,!0)}})}.call(this),cc._RF.pop()},{}],Bullet:[function(e,t,i){"use strict";cc._RF.push(t,"33220Oj2jdCD5aSySSVEWcF","Bullet"),function(){cc.Class({extends:e("Actor"),onLoad:function(){return this.direction=cc.p(0,0),this.speed=300},update:function(e){return this.RigidBody.linearVelocity=this.direction.mul(this.speed)},onBeginContact:function(e,t,i){return cc.log("Hit!"),this.explode()}})}.call(this),cc._RF.pop()},{Actor:"Actor"}],Character:[function(i,e,t){"use strict";cc._RF.push(e,"36a9bCKfElDMJ5N0hgtKeZz","Character"),function(){var e,t;e=i("GameManager"),t=i("NodeUtil"),cc.Class({extends:i("Actor"),properties:{CanMove:{visible:!1,get:function(){return this.canMove()}}},canMove:function(){return e.i().Occurring&&!e.i().paused},start:function(){return{}},onLoad:function(){return this.direction=cc.Vec2.ZERO,this.lastUsedDirection=cc.Vec2.ZERO,this.lastSpeed=0,this.animation=t.getComponentInChildrenInclusive(this.node,cc.Animation),null==this.animation||this.animation.enabled||(this.animation=null),this.currentAnimationState=null},update:function(e){var t;if((t=this.CanMove?this.direction:cc.Vec2.ZERO)!==this.lastUsedDirection||this.lastSpeed!==this.speed)return this.refreshVelocity(t)},refreshVelocity:function(e){var t;return t=e.mul(this.speed),this.RigidBody.linearVelocity=t,null!=this.animation&&this.refreshAnimation(),this.lastSpeed=this.speed,this.lastUsedDirection=e.clone()},refreshAnimation:function(){var e,t;return e=this.CanMove?this.direction:cc.Vec2.ZERO,null!=(t=function(){switch(!1){case 1!==e.y:return"WalkUp";case-1!==e.y:return"WalkDown";case 1!==e.x:return"WalkRight";case-1!==e.x:return"WalkLeft";default:return null}}())?this.playAnimation(t):this.animation.pause()},playAnimation:function(e){var t;if((null!=(t=this.currentAnimationState)?t.name:void 0)!==e)return this.currentAnimationState=this.animation.play(e),null!=this.currentAnimationState&&null!=this.speed||cc.log("Bug!"),this.currentAnimationState.speed=this.speed/600;this.currentAnimationState.isPaused&&this.animation.resume()}})}.call(this),cc._RF.pop()},{Actor:"Actor",GameManager:"GameManager",NodeUtil:"NodeUtil"}],Direction:[function(e,t,i){"use strict";cc._RF.push(t,"17a82LzIypOBoaer8097yJW","Direction"),function(){t.exports.UP=cc.Vec2.UP,t.exports.RIGHT=cc.Vec2.RIGHT,t.exports.DOWN=cc.Vec2.UP.mul(-1),t.exports.LEFT=cc.Vec2.RIGHT.mul(-1)}.call(this),cc._RF.pop()},{}],EndingController:[function(e,t,i){"use strict";cc._RF.push(t,"125fbHW/0FCEpzixMx5hUko","EndingController"),function(){var t;t=e("Direction"),cc.Class({extends:cc.Component,properties:{shipNode:cc.Node,spaceBaseNode:cc.Node,backgroundNode:cc.Node},onLoad:function(){return cc.view.enableAntiAlias(!1),this.shipNode.active=!1,setTimeout(this.enableShip.bind(this),1600),setTimeout(this.finish.bind(this),9600)},update:function(e){if(this.backgroundNode.position=this.backgroundNode.position.add(cc.Vec2.ONE.mul(.9*e)),this.spaceBaseNode.position=this.spaceBaseNode.position.add(t.DOWN.mul(.5*e)),this.shipNode.active)return this.shipNode.position=this.shipNode.position.add(t.RIGHT.mul(15*e))},enableShip:function(){return this.shipNode.active=!0},finish:function(){return cc.director.loadScene("Menu")}})}.call(this),cc._RF.pop()},{Direction:"Direction"}],EnemyEventHelper:[function(t,e,i){"use strict";cc._RF.push(e,"71a9bRKmfJJ/6pcviCex5Kb","EnemyEventHelper"),function(){var n,e;e=t("Enemy"),n=t("Direction"),cc.Class({extends:cc.Component,editor:{requireComponent:e},onLoad:function(){return this.enemy=this.node.getComponent(e)},up:function(e,t){return this.addTileStep(n.UP,this.parseEvent(t))},left:function(e,t){return this.addTileStep(n.LEFT,this.parseEvent(t))},down:function(e,t){return this.addTileStep(n.DOWN,this.parseEvent(t))},right:function(e,t){return this.addTileStep(n.RIGHT,this.parseEvent(t))},circleUpRight:function(e,t){var i;return i=[n.UP,n.RIGHT,n.DOWN,n.LEFT],this.addTileStep(i,this.parseEvent(t))},circleRightDown:function(e,t){var i;return i=[n.RIGHT,n.DOWN,n.LEFT,n.UP],this.addTileStep(i,this.parseEvent(t))},circleDownLeft:function(e,t){var i;return i=[n.DOWN,n.LEFT,n.UP,n.RIGHT],this.addTileStep(i,this.parseEvent(t))},circleLeftUp:function(e,t){var i;return i=[n.LEFT,n.UP,n.RIGHT,n.DOWN],this.addTileStep(i,this.parseEvent(t))},circleUpLeft:function(e,t){var i;return i=[n.UP,n.LEFT,n.DOWN,n.RIGHT],this.addTileStep(i,this.parseEvent(t))},circleLeftDown:function(e,t){var i;return i=[n.LEFT,n.DOWN,n.RIGHT,n.UP],this.addTileStep(i,this.parseEvent(t))},circleDownRight:function(e,t){var i;return i=[n.DOWN,n.RIGHT,n.UP,n.LEFT],this.addTileStep(i,this.parseEvent(t))},circleRightUp:function(e,t){var i;return i=[n.RIGHT,n.UP,n.LEFT,n.DOWN],this.addTileStep(i,this.parseEvent(t))},addTileStep:function(e,n){var r,t,i,s;for(Array.isArray(e)||(e=[e]),s=[],t=0,i=e.length;t<i;t++)r=e[t],s.push(function(){var e,t,i;for(i=[],e=0,t=n;0<=t?e<t:t<e;0<=t?++e:--e)i.push(this.enemy.directionArray.push(r));return i}.call(this));return s},parseEvent:function(e){return e?parseInt(e):1}})}.call(this),cc._RF.pop()},{Direction:"Direction",Enemy:"Enemy"}],Enemy:[function(i,e,t){"use strict";cc._RF.push(e,"aaf0bPLRvJMc7ODlumcZy3X","Enemy"),function(){var t,e,r,s;s=i("Player"),i("Input"),t=i("Direction"),e=i("MathUtil"),r=i("NodeUtil"),cc.Class({extends:i("Character"),properties:{definedSpeed:32,commandList:[cc.Component.EventHandler],OnDestiny:{visible:!1,get:function(){var e;switch(e=.01*this.speed,this.directionArray[this.index]){case t.UP:return this.node.position.y>=this.destiny.y-e;case t.DOWN:return this.node.position.y<=this.destiny.y+e;case t.RIGHT:return this.node.position.x>=this.destiny.x-e;case t.LEFT:return this.node.position.x<=this.destiny.x+e}}}},onLoad:function(){return this._super(),this.speed=this.definedSpeed,this.destiny=cc.Vec2.ZERO,this.index=-1,this.directionArray=[]},start:function(){return this._super(),cc.Component.EventHandler.emitEvents(this.commandList,null),this.directionsAreValid(this.directionArray)||cc.error(this.node.name+" directionArray won't sum 0!"),this.initializeNextDestiny()},update:function(e){if(this._super(),this.OnDestiny)return this.initializeNextDestiny()},lateUpdate:function(e){return this.collidedWithPlayerLastFrame=!1},directionsAreValid:function(e){var t,i,n,r;for(r=cc.Vec2.ZERO,i=0,n=e.length;i<n;i++)t=e[i],r.addSelf(t);return 0===r.mag()},initializeNextDestiny:function(){return this.index=e.repeat(this.index+1,this.directionArray.length),this.destiny=this.node.position.add(this.directionArray[this.index].mul(16)),this.direction=this.directionArray[this.index]},onBeginContact:function(e,t,i){var n;if(cc.isValid(this.node)&&!this.collidedWithPlayerLastFrame)return null!=(n=r.getComponentInParent(i.node,s))?(this.collidedWithPlayerLastFrame=!0,n.receiveDamage(1),this.explode()):void 0}})}.call(this),cc._RF.pop()},{Character:"Character",Direction:"Direction",Input:"Input",MathUtil:"MathUtil",NodeUtil:"NodeUtil",Player:"Player"}],ExitPoint:[function(e,t,i){"use strict";cc._RF.push(t,"047050JDpdAi7HBiimMM3+1","ExitPoint"),function(){var n,r,s;n=e("GameManager"),s=e("Player"),r=e("NodeUtil"),cc.Class({extends:cc.Component,onBeginContact:function(e,t,i){if(null!=r.getComponentInParent(i.node,s))return n.i().stageClear()}})}.call(this),cc._RF.pop()},{GameManager:"GameManager",NodeUtil:"NodeUtil",Player:"Player"}],FlashingLabel:[function(e,t,i){"use strict";cc._RF.push(t,"8cfb2rY86VLKLFpe9WE2jB0","FlashingLabel"),function(){cc.Class({extends:cc.Component,properties:{secondsDisplaying:1,secondsAway:1},onLoad:function(){return this.disappears()},display:function(){if(null!=this.node)return this.node.opacity=255,setTimeout(this.disappears.bind(this),1e3*this.secondsDisplaying)},disappears:function(){if(null!=this.node)return this.node.opacity=0,setTimeout(this.display.bind(this),1e3*this.secondsAway)}})}.call(this),cc._RF.pop()},{}],FormatUtil:[function(e,t,i){"use strict";cc._RF.push(t,"fb8e0d31kpC0Jy8SuYmorgU","FormatUtil"),function(){t.exports.exactDigits=function(e,t){return("0".repeat(t-1)+e).slice(-t)}}.call(this),cc._RF.pop()},{}],GameManager:[function(i,e,t){"use strict";cc._RF.push(e,"ef5a2VC73pG6pHSZCAee+Da","GameManager"),function(){var t,e;e=i("Input"),t=cc.Class({extends:cc.Component,statics:{_i:null,startTime:null,endTime:null,lastStageNumber:null,totalHits:0,gameOver:!1,i:function(){return null!==this._i&&cc.isValid(this._i)||(this._i=cc.find("GameManager").getComponent(t)),this._i},getSeconds:function(){var e;return null==this.startTime?0:(e=null!=this.endTime?this.endTime.getTime():Date.now(),Math.round((e-this.startTime.getTime())/1e3))},clearStaticGameData:function(){return this.startTime=null,this.endTime=null,this.lastStageNumber=null,this.totalHits=0,this.gameOver=!1,i("Player").clearStaticGameData()}},properties:{playerPrefab:cc.Prefab,hudPrefab:cc.Prefab,stageTimeEndingSFX:cc.AudioSource,gameOverSFX:cc.AudioSource,stageClearSFX:cc.AudioSource,sceneNameArray:[cc.String],Canvas:{visible:!1,get:function(){return null==this._canvas&&(this._canvas=cc.find("Canvas").getComponent(cc.Canvas)),this._canvas}},Stage:{visible:!1,get:function(){return null==this._stage&&(this._stage=this.Canvas.node.getComponentInChildren(i("Stage"))),this._stage}},Seconds:{visible:!1,get:function(){return t.getSeconds()}},StageRemainingSeconds:{visible:!1,get:function(){var e;return null==this.stageStartTime?0:(e=null!=this.stageEndTime?this.stageEndTime.getTime():Date.now(),40-Math.round((e-this.stageStartTime.getTime())/1e3))}},TotalHits:{visible:!1,get:function(){return t.totalHits},set:function(e){return t.totalHits=e}},Occurring:{visible:!1,get:function(){return null!=t.startTime&&null==t.endTime}},Busy:{visible:!1,get:function(){return!this.Occurring||this.finishingStage}}},onLoad:function(){return e.register(),this.finishingStage=!1,cc.director.getPhysicsManager().enabled=!0,cc.view.enableAntiAlias(!1)},start:function(){return this.player=cc.instantiate(this.playerPrefab).getComponent(i("Player")),this.hud=cc.instantiate(this.hudPrefab).getComponent(i("HUD")),this.Canvas.node.addChild(this.hud.node),this.Stage.initialize(),t.lastStageNumber=this.Stage.Number,this.initializeCamera(),null==t.startTime&&(t.startTime=new Date),null==this.stageStartTime&&(this.stageStartTime=new Date),setTimeout(this.startStage.bind(this),1)},startStage:function(){return this.finishingStage=!1,this.hud.enableRefresh(),this.schedule(this.stageTimeOverCheck,.2)},initializeCamera:function(){var e;return e=(new cc.Node).addComponent(cc.Camera),this.player.attachCamera(e),e.addTarget(this.Stage.node)},instantiateTest:function(){var e;return e=cc.instantiate(this.bulletPrefab).getComponent("Bullet"),this.Stage.node.addChild(e.node),e.node.setPosition(cc.p(200,200)),e.direction=cc.p(0,-1),e},onDebugKeyPress:function(e){if(e.keyCode===cc.KEY.e)return this.stageClear()},stageTimeOverCheck:function(){if(!(this.Busy||5<this.StageRemainingSeconds||(this.stageTimeEndingSFX.isPlaying||(this.Stage.bgm.stop(),this.stageTimeEndingSFX.play()),-1<this.StageRemainingSeconds)))return this.stageTimeEndingSFX.stop(),this.player.timeOver()},stageClear:function(){return this.finishStage(),null==t.liveStartTime&&(t.liveStartTime=new Date),this.stageClearSFX.play(),setTimeout(this.goIntoNextStage.bind(this),1200)},goIntoNextStage:function(){return this.Stage.Number===this.sceneNameArray.length-1?this.clear():cc.director.loadScene(this.sceneNameArray[this.Stage.Number+1])},gameOver:function(){return this.finishStage(),this.gameOverSFX.play(),setTimeout(function(){return cc.director.loadScene(cc.director.getScene().name)}.bind(this),3e3)},finishStage:function(){return this.stageEndTime=new Date,this.finishingStage=!0,this.Stage.bgm.stop()},clear:function(){return t.gameOver=!1,t.endTime=new Date,cc.director.loadScene("Ending")},onDestroy:function(){e.unregister()}})}.call(this),cc._RF.pop()},{HUD:"HUD",Input:"Input",Player:"Player",Stage:"Stage"}],HUD:[function(e,t,i){"use strict";cc._RF.push(t,"aebc7pyE5JIUKKQPgeYV9iN","HUD"),function(){var n,r;r=e("GameManager"),n=e("FormatUtil"),cc.Class({extends:cc.Component,properties:{heartRect:e("HeartRect"),totalHitsLabel:cc.Label,stageLabel:cc.Label,timeLabel:cc.Label,stageRemainingTimeLabel:cc.Label},enableRefresh:function(){return this.schedule(this.refresh,.2),this.refresh()},refresh:function(){var e,t,i;return this.heartRect.Value=r.i().player.hp,this.totalHitsLabel.string=n.exactDigits(r.i().TotalHits,3),this.stageLabel.string="STAGE "+r.i().Stage.Number,this.stageRemainingTimeLabel.string=Math.max(r.i().StageRemainingSeconds,0),e=r.i().Seconds,t=n.exactDigits(Math.floor(e/60),2),i=n.exactDigits(e%60,2),this.timeLabel.string=t+":"+i}})}.call(this),cc._RF.pop()},{FormatUtil:"FormatUtil",GameManager:"GameManager",HeartRect:"HeartRect"}],HeartRect:[function(e,t,i){"use strict";cc._RF.push(t,"367361AwYVHi6v0bLIJWfxm","HeartRect"),function(){cc.Class({extends:cc.Component,properties:{spriteArray:[cc.Sprite],Value:{visible:!1,get:function(){return this._value},set:function(e){if(null==this._value||this._value!==e)return this._value=e,this.refresh()}}},refresh:function(){var e,t,i,n;for(n=[],e=t=0,i=this.spriteArray.length;0<=i?t<i:i<t;e=0<=i?++t:--t)n.push(this.spriteArray[e].node.active=this.Value>e);return n}})}.call(this),cc._RF.pop()},{}],IncreasingNumberLabel:[function(e,t,i){"use strict";cc._RF.push(t,"aaf5cXO4u5IUZfaR6Xwpmac","IncreasingNumberLabel"),function(){var t;t=null,cc.Class({extends:cc.Component,editor:{requireComponent:cc.Label},properties:{numberPerSecond:100,digitsNumber:{default:0,type:cc.Integer,tooltip:"When isn't 0, calls FormatUtil.exactDigits with the digitsNumber"},sfx:{default:null,type:cc.AudioSource,tooltip:"For playing with number animation"}},onLoad:function(){if(this.label=this.node.getComponent(cc.Label),this.animating=!1,0<this.digitsNumber)return t=e("FormatUtil")},startAnimation:function(e,t){if(this.value=e,this.callback=t,this.animating=!0,null!=this.sfx)return this.sfx.play()},forceValue:function(e){return this.value=e,this.complete()},update:function(e){if(this.animating)return this.current+=this.numberPerSecond*e,this.refresh(),this.current>=this.value?this.complete():void 0},refresh:function(){var e;return e=Math.floor(this.current),0<this.digitsNumber?this.label.string=t.exactDigits(e,this.digitsNumber):e.toString()},complete:function(){return this.current=this.value,this.refresh(),this.animating=!1,null!=this.sfx&&this.sfx.stop(),"function"==typeof this.callback&&this.callback(),this.callback=null}})}.call(this),cc._RF.pop()},{FormatUtil:"FormatUtil"}],Input:[function(e,t,i){"use strict";cc._RF.push(t,"fe11e/iPTJMaIvefTkyoHZZ","Input"),function(){var i;i=cc.Class({statics:{_singleton:null,left:!1,right:!1,down:!1,up:!1,register:function(){return this._singleton=new(e("Input")),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._singleton.onKeyDown,this._singleton),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._singleton.onKeyUp,this._singleton)},unregister:function(){return cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._singleton.onKeyDown,this._singleton),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._singleton.onKeyUp,this._singleton)}},onKeyDown:function(e){return this.handleKeyPress(e.keyCode,!0)},onKeyUp:function(e){return this.handleKeyPress(e.keyCode,!1)},handleKeyPress:function(e,t){switch(e){case cc.KEY.a:case cc.KEY.left:return i.left=t;case cc.KEY.d:case cc.KEY.right:return i.right=t;case cc.KEY.s:case cc.KEY.down:return i.down=t;case cc.KEY.w:case cc.KEY.up:return i.up=t}}})}.call(this),cc._RF.pop()},{Input:"Input"}],IntroPanel:[function(e,t,i){"use strict";cc._RF.push(t,"31653PB8DBIq7wofdQ0nUmV","IntroPanel"),function(){cc.Class({extends:e("Panel"),properties:{subpanelArray:[cc.Node]},onEnable:function(){return this.index=0,this.refreshActiveSubpanel()},refreshActiveSubpanel:function(){var e,t,i,n;for(n=[],e=t=0,i=this.subpanelArray.length;0<=i?t<i:i<t;e=0<=i?++t:--t)n.push(this.subpanelArray[e].active=e===this.index);return n},onConfirm:function(){return this._super(),this.index===this.subpanelArray.length-1?this.finish():(this.index++,this.refreshActiveSubpanel())},finish:function(){return this.onFinish()}})}.call(this),cc._RF.pop()},{Panel:"Panel"}],MathUtil:[function(e,t,i){"use strict";cc._RF.push(t,"54e5b+37WpNn5XW0pm1RuM2","MathUtil"),function(){t.exports.approximately=function(e,t,i){return null==i&&(i=.001),Math.abs(e-t)<i},t.exports.repeat=function(e,t){for(;e<0;)e+=t;for(;t<=e;)e-=t;return e}}.call(this),cc._RF.pop()},{}],MenuController:[function(s,e,t){"use strict";cc._RF.push(e,"b9ad45IrHpO0aEALc0qgGl8","MenuController"),function(){var e;e=s("GameManager"),cc.Class({extends:cc.Component,properties:{debugIndex:-1,GameEnded:{visible:!1,get:function(){return null!=e.startTime}}},onLoad:function(){return cc.view.enableAntiAlias(!1),this.initializePanels(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onInput,this)},start:function(){return this.GameEnded?this.goToPanel(this.resultsPanel):this.goToPanel(this.introPanel)},initializePanels:function(){var e,t,i,n,r;for(this.resultsPanel=this.node.getComponentInChildren(s("ResultsPanel")),this.introPanel=this.node.getComponentInChildren(s("IntroPanel")),this.titlePanel=this.node.getComponentInChildren(s("TitlePanel")),this.panelArray=[this.resultsPanel,this.introPanel,this.titlePanel],r=[],e=0,t=(n=this.panelArray).length;e<t;e++)i=n[e],r.push(i.onFinish=this.goToNextPanel.bind(this));return r},enablePanel:function(e){var t,i,n,r,s;for(s=[],t=0,i=(r=this.panelArray).length;t<i;t++)n=r[t],s.push(n.node.active=e===n);return s},goToPanel:function(e){return this.currentPanelIndex=this.panelArray.indexOf(e),this.enablePanel(e)},goToNextPanel:function(){return this.goToPanel(this.panelArray[this.currentPanelIndex+1])},onInput:function(e){switch(e.keyCode){case cc.KEY.enter:case cc.KEY.space:case cc.KEY.ctrl:return this.panelArray[this.currentPanelIndex].onConfirm()}},onDestroy:function(){return cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onInput,this)}})}.call(this),cc._RF.pop()},{GameManager:"GameManager",IntroPanel:"IntroPanel",ResultsPanel:"ResultsPanel",TitlePanel:"TitlePanel"}],NewScript:[function(e,t,i){"use strict";cc._RF.push(t,"f5becfIUrVAOr/X2smhTXAi","NewScript"),function(){cc.Class({extends:cc.Component,properties:{},update:function(e){}})}.call(this),cc._RF.pop()},{}],NodeUtil:[function(e,t,i){"use strict";cc._RF.push(t,"e5739yI6J1GpLVuqxec+UoC","NodeUtil"),function(){t.exports.changeColorAndAlpha=function(e,t){return e.color=cc.color(t.r,t.g,t.b),e.opacity=t.a},t.exports.changeParent=function(e,t){var i,n,r,s;if(e.parent!==t)return r=(i=function(e){var t,i;for(i=(t=e).rotation;i+=(t=t.parent).rotation,null!=t.parent;);return i%=360})(e)-i(t),s=e.convertToWorldSpaceAR(cc.p(0,0)),n=t.convertToNodeSpaceAR(s),e.parent=t,e.position=n,e.rotation=r},t.exports.getComponentInChildrenInclusive=function(e,t){var i;return null!=(i=e.getComponent(t))?i:i=e.getComponentInChildren(t)},t.exports.getComponentsInChildrenInclusive=function(e,t){return e.getComponentsInChildren(t).concat(e.getComponents(t))},t.exports.getComponentInParent=function(e,t){var i,n;for(n=e;n!==cc.director.getScene();){if(null!=(i=n.getComponent(t)))return i;n=n.parent}return null},t.exports.copyNodeProperties=function(e,t){return e.position=t.position,e.rotation=t.rotation,e.scale=t.scale,e.anchor=t.anchor,e.width=t.width,e.height=t.height,e.color=t.color,e.opacity=t.opacity,e.skew=t.skew,e.group=t.group}}.call(this),cc._RF.pop()},{}],Panel:[function(e,t,i){"use strict";cc._RF.push(t,"1076e8l7EdM5LxScBdA9iHd","Panel"),function(){cc.Class({extends:cc.Component,onConfirm:function(){},finish:function(){return this.onFinish()}})}.call(this),cc._RF.pop()},{}],Persistence:[function(e,i,t){"use strict";cc._RF.push(i,"bc85cuaJ4JBDpSGlzmwYABi","Persistence"),function(){var e,t;e=function(e){var t;return null!=(t=cc.sys.localStorage.getItem(e))?t:0},t=function(e,t){return cc.sys.localStorage.setItem(e,t.toString())},i.exports.getBestScore=function(){return e("Best")},i.exports.setBestScore=function(e){return t("Best",e)},i.exports.getLastScore=function(){return e("Last")},i.exports.setLastScore=function(e){return t("Last",e)}}.call(this),cc._RF.pop()},{}],PlayerCorpse:[function(e,t,i){"use strict";cc._RF.push(t,"a1c82slatJMNrkoUUW8nO6w","PlayerCorpse"),function(){cc.Class({extends:cc.Component,onLoad:function(){var e,t;return t=cc.moveBy(.6,cc.p(0,16)).easing(cc.easeCubicActionOut()),e=cc.moveBy(1.2,cc.p(0,-256)).easing(cc.easeCubicActionIn()),this.node.runAction(cc.sequence([t,e,cc.callFunc(this.finish,this)]))},finish:function(){return this.node.destroy()}})}.call(this),cc._RF.pop()},{}],Player:[function(n,e,t){"use strict";cc._RF.push(e,"5ccfcxjqRdAQLxLUe/hbDuO","Player"),function(){var i,e,t;i=n("GameManager"),t=n("NodeUtil"),e=n("Input"),cc.Class({extends:n("Character"),statics:{hp:0,clearStaticGameData:function(){return this.hp=0}},properties:{cameraContainer:cc.Node,damageSFX:cc.AudioSource,Flashing:{visible:!1,get:function(){return i.i().Occurring&&this.Alive&&null!=this.flashingEndTime&&this.flashingEndTime.getTime()>Date.now()}},Alive:{visible:!1,get:function(){return 0<this.hp}}},canMove:function(){return this._super()&&this.Alive&&!i.i().Busy},onLoad:function(){return this._super(),this.sprite=t.getComponentInChildrenInclusive(this.node,cc.Sprite),this.flashingEndTime=new Date(0),this.hp=3,this.speed=64},start:function(){return this._super()},update:function(e){return this._super(),this.updateInput()},updateInput:function(){return e.up?this.direction.y=1:e.down?this.direction.y=-1:this.direction.y=0,e.right?this.direction.x=1:e.left?this.direction.x=-1:this.direction.x=0},attachCamera:function(e){return this.cameraContainer.addChild(e.node)},detachCamera:function(){var e;return e=this.cameraContainer.convertToWorldSpaceAR(cc.Vec2.ZERO),this.node.removeChild(this.cameraContainer),this.node.parent.addChild(this.cameraContainer),this.cameraContainer.position=this.cameraContainer.parent.convertToNodeSpaceAR(e)},receiveDamage:function(e){var t;if(this.Alive)return this.hp-=e,i.i().TotalHits++,this.Alive?(this.damageSFX.play(),t=this.Flashing,this.resetFlashingCounter(),t?void 0:this.goToNextFlashFrame()):this.explode()},resetFlashingCounter:function(){return this.flashingEndTime.setTime(Date.now()+2e3)},goToNextFlashFrame:function(){if(this.Flashing)return this.sprite.node.opacity=0===this.sprite.node.opacity?255:0,setTimeout(this.goToNextFlashFrame.bind(this),150);null!=this.sprite&&(this.sprite.node.opacity=255)},timeOver:function(){if(this.Alive)return i.i().TotalHits++,this.explode()},explode:function(){return this.detachCamera(),i.i().gameOver(),this._super(),this.node.active=!1},finish:function(){}})}.call(this),cc._RF.pop()},{Character:"Character",GameManager:"GameManager",Input:"Input",NodeUtil:"NodeUtil"}],ResultsLine:[function(e,t,i){"use strict";cc._RF.push(t,"88aebMYpNVNnoHE6TxT5Drc","ResultsLine"),function(){var s;s=e("FormatUtil"),cc.Class({extends:cc.Component,properties:{typeLabel:cc.Label,multiplyingLabel:cc.Label,multiplierLabel:cc.Label,product:e("IncreasingNumberLabel")},initialize:function(e,t,i,n){var r;return this.sign=n,this.typeLabel.string=e,this.sign||(this.typeLabel.string="-"+this.typeLabel.string),r=Math.min(999,t),this.productValue=r*i,this.multiplyingLabel.string=s.exactDigits(r,3),this.multiplierLabel.string=s.exactDigits(i,2),this.product.forceValue(0)},startAnimation:function(e){return this.product.startAnimation(this.productValue,e)}})}.call(this),cc._RF.pop()},{FormatUtil:"FormatUtil",IncreasingNumberLabel:"IncreasingNumberLabel"}],ResultsPanel:[function(i,e,t){"use strict";cc._RF.push(e,"be112Jx/09B75GCW+aG5lb8","ResultsPanel"),function(){var e,t,s;e=i("GameManager"),i("Player"),t=i("Persistence"),s=i("ResultsLine"),cc.Class({extends:i("Panel"),properties:{linePrefab:cc.Prefab,table:cc.Layout,result:i("IncreasingNumberLabel"),gameOverNode:cc.Node,gameClearNode:cc.Node,IsGameOver:{visible:!1,get:function(){return!1}},DebugTesting:{visible:!1,get:function(){return null==e.startTime}}},onEnable:function(){return this.clear(),this.initialize()},clear:function(){var e,t,i;if(null!=this.lineArray){for(e=0,t=(i=this.lineArray).length;e<t;e++)i[e].node.destroy();return this.lineArray.length=0}},initialize:function(){return this.canConfirm=!1,this.gameOverNode.active=!1,this.gameClearNode.active=!1,this.result.forceValue(0),this.index=-1,this.initializeLineArray(),this.totalValue=this.calculateTotalValue(),t.setLastScore(this.totalValue),this.totalValue>t.getBestScore()&&t.setBestScore(this.totalValue),setTimeout(this.animateNextLine.bind(this),2e3)},initializeLineArray:function(){return this.lineArray=[],this.DebugTesting&&(e.startTime=new Date,e.endTime=new Date,e.lastStageNumber=1,e.totalHits=2),this.IsGameOver?this.lineArray.push(this.createLine("Stage",e.lastStageNumber,1,!0)):(this.lineArray.push(this.createLine("Clear",e.lastStageNumber,99,!0)),this.lineArray.push(this.createLine("Hits",e.totalHits,10,!1)),this.lineArray.push(this.createLine("Time",this.calculateTimeBonus(),1,!1)))},createLine:function(e,t,i,n){var r;return r=cc.instantiate(this.linePrefab).getComponent(s),this.table.node.addChild(r.node),r.node.setSiblingIndex(this.lineArray.length),r.initialize(e,t,i,n),r},calculateTimeBonus:function(){return Math.round((e.endTime.getTime()-e.startTime.getTime())/1e3)},calculateTotalValue:function(){var e,t,i,n,r;for(e=r=0,t=(n=this.lineArray).length;e<t;e++)r+=(i=n[e]).productValue*(i.sign?1:-1);return Math.max(0,r)},animateNextLine:function(){return this.index++,this.index===this.lineArray.length?this.result.startAnimation(this.totalValue,this.onFinishAnimation.bind(this)):this.lineArray[this.index].startAnimation(this.animateNextLine.bind(this))},onFinishAnimation:function(){return setTimeout(function(){return this.canConfirm=!0,(this.IsGameOver?this.gameOverNode:this.gameClearNode).active=!0}.bind(this),2e3)},onConfirm:function(){if(this.canConfirm)return this._super(),this.finish()}})}.call(this),cc._RF.pop()},{GameManager:"GameManager",IncreasingNumberLabel:"IncreasingNumberLabel",Panel:"Panel",Persistence:"Persistence",Player:"Player",ResultsLine:"ResultsLine"}],Stage:[function(t,e,i){"use strict";cc._RF.push(e,"d721eFWCvhOWq3YqN4UwSZS","Stage"),function(){var e;e=t("GameManager"),t("NodeUtil"),cc.Class({extends:cc.Component,properties:{startNode:cc.Node,Number:{visible:!1,get:function(){return null==this._number&&(this._number=e.i().sceneNameArray.indexOf(cc.director.getScene().name),-1===this._number&&(this._number=1)),this._number}}},onLoad:function(){return this.bgm=this.node.getComponent(cc.AudioSource),this.fixTilemapTextureAlias(this.node.getComponentInChildren(cc.TiledMap))},initialize:function(){return this.node.getComponentInChildren(t("TilemapColliderCreator")).create(),this.node.addChild(e.i().player.node),e.i().player.node.setPosition(this.calculateStartPosition())},calculateStartPosition:function(){return this.node.convertToNodeSpaceAR(this.startNode.convertToWorldSpaceAR(cc.p(0,-16)))},fixTilemapTextureAlias:function(e){var t,i,n,r,s,a;for(e.allLayers(),s=[],t=0,n=(r=e.allLayers()).length;t<n;t++)(a=(i=r[t])._sgNode._texture).setAliasTexParameters(),s.push(i._sgNode._texture=a);return s}})}.call(this),cc._RF.pop()},{GameManager:"GameManager",NodeUtil:"NodeUtil",TilemapColliderCreator:"TilemapColliderCreator"}],TestPhysics:[function(e,t,i){"use strict";cc._RF.push(t,"d2d03cY8l9On6dWG9bM2Zpb","TestPhysics"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit}}),cc._RF.pop()},{}],TilemapColliderCreator:[function(e,t,i){"use strict";cc._RF.push(t,"b4471WJU51BIKPiPIXU7WXO","TilemapColliderCreator"),function(){e("NodeUtil"),cc.Class({extends:cc.Component,editor:{requireComponent:cc.TiledLayer},properties:{createOnLoad:!0,colliderPrefab:{default:null,type:cc.Prefab,tooltip:"When null, uses a default PhysicsBoxCollider"}},onLoad:function(){if(this.createOnLoad)return this.create()},create:function(){var e,t,i,n,r,s,a;for(this.layer=this.node.getComponent(cc.TiledLayer),this.tilemap=this.node.parent.getComponent(cc.TiledMap),this.tileSize=this.layer.getMapTileSize(),this.mapSizeInTiles=new cc.Size(this.tilemap.node.width/this.tileSize.width,this.tilemap.node.height/this.tileSize.height),cc.log("before ms="+(new Date).getMilliseconds()+" date="),cc.log(new Date),s=e=0,n=this.mapSizeInTiles.width;0<=n?e<n:n<e;s=0<=n?++e:--e)for(a=t=0,r=this.mapSizeInTiles.height;0<=r?t<r:r<t;a=0<=r?++t:--t)i=cc.p(s,a),this.layer.getTileGIDAt(i)&&this.createColliderTile(i);return cc.log("after ms="+(new Date).getMilliseconds()+" date="),cc.log(new Date)},createColliderTile:function(e){var t;return t=null!=this.colliderPrefab?cc.instantiate(this.colliderPrefab):this.buildColliderTile(),this.node.addChild(t),t.setPosition(this.calculateTilePosition(e)),t},buildColliderTile:function(){var e;return(e=new cc.Node).setContentSize(this.tileSize),e.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,e.addComponent(cc.PhysicsBoxCollider).size=this.tileSize,e},calculateTilePosition:function(e){return cc.p((-(this.mapSizeInTiles.width-1)/2+e.x)*this.tileSize.width,((this.mapSizeInTiles.height-1)/2-e.y)*this.tileSize.height)}})}.call(this),cc._RF.pop()},{NodeUtil:"NodeUtil"}],TitlePanel:[function(n,e,t){"use strict";cc._RF.push(e,"e520fwdr8pD+aIqBar/9PcY","TitlePanel"),function(){var e,t,i;t=n("GameManager"),i=n("Persistence"),e=n("FormatUtil"),cc.Class({extends:n("Panel"),properties:{bestScoreLabel:cc.Label,lastScoreLabel:cc.Label},onLoad:function(){return this.bestScoreLabel.string="Best:"+e.exactDigits(i.getBestScore(),3),this.lastScoreLabel.string="Last:"+e.exactDigits(i.getLastScore(),3)},onConfirm:function(){return this._super(),t.clearStaticGameData(),cc.director.loadScene("StageA")}})}.call(this),cc._RF.pop()},{FormatUtil:"FormatUtil",GameManager:"GameManager",Panel:"Panel",Persistence:"Persistence"}]},{},["Actor","Bullet","Character","Enemy","EnemyEventHelper","Player","Direction","EndingController","ExitPoint","GameManager","HUD","HeartRect","Input","FlashingLabel","MenuController","IntroPanel","Panel","ResultsLine","ResultsPanel","TitlePanel","Persistence","PlayerCorpse","FormatUtil","IncreasingNumberLabel","MathUtil","NodeUtil","TilemapColliderCreator","Stage","BGMCreator","BGMPlayer","BGMPlayerOld","NewScript","TestPhysics"]);